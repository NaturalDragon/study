<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script>
    /*
    数组必须有序，不存在不重复值
    */
    function bSearch(arr, value) {
        let low = 0;
        let high = arr.length - 1;
        let count = 1;
        while (low <= high) {
            console.log(`第${count}次查找`)
            count++
            let middle = Math.floor(low+(high-low)/2)//Math.floor((low + high) / 2)//如果 low 和 high 比较大的话，两者之和就有可能会溢出
            if (arr[middle] === value) {
                return middle
            }
            else if (arr[middle] < value) {
                low = middle + 1
            } else {
                high = middle - 1
            }
        }
        return -1
    }

    let arr1 = []
    for (let index = 0; index < 100; index++) {
        arr1.push(index)

    }
    let index = bSearch(arr1, 23)
    console.log(index)

    //变体一：查找第一个值等于给定值的元素
    var arr2=[1,3,4,5,6,8,8,8,11,18]
    function bSearch2(arr,value) {
        let low=0;
        let high=arr.length-1;
        while (low<=high) {
            let middle=Math.floor(low+(high-low)/2)
            if(arr[middle]>value){
                high=middle-1
            }else  if(arr[middle]<value){
                low=middle+1
            }
            else{
                if(middle==0||arr[middle-1]!=value)return middle
                else{
                    high=middle-1
                }
            }
        }
        return -1
    }

    // 变体二：查找最后一个值等于给定值的元素
    function bSearch3(arr,value) {
        let low=0;
        let high=arr.length-1;
        while (low<=high) {
            let middle=Math.floor(low+(high-low)/2)
            if(arr[middle]>value){
                high=middle-1
            }else  if(arr[middle]<value){
                low=middle+1
            }
            else{
                if(middle==0||arr[middle+1]!=value)return middle
                else{
                    high=middle+1
                }
            }
        }
        return -1
    }
    // 变体三：查找第一个大于等于给定值的元素
    var arr3=[3,4,6,7,10]
    function bSearch4(arr,value) {
        let low=0;
        let high=arr.length-1;
        while (low<=high) {
            let middle=Math.floor(low+(high-low)/2)
            if(arr[middle]>=value){
                if(middle==0||arr[middle-1]<value) return middle
                else high=middle-1

            }else{
                low=middle+1
            }
        }
    }
    // 变体四：查找最后一个小于等于给定值的元素
    function bSearch5(arr,value) {
        let low=0;
        let high=arr.length-1;
        while (low<=high) {
            let middle=Math.floor(low+(high-low)/2)
            if(arr[middle]<=value){
                if(middle==0||arr[middle+1]>value)return middle
                else low=middle+1
            }else{
                high=middle-1
            }
        }
    }
</script>